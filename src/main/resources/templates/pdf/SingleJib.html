<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" th:src="@{/js/vue.js}"></script>
    <!--     引入样式 -->
    <link rel="stylesheet" th:href="@{/css/element.css}">
    <!-- 引入组件库 -->
    <script type="text/javascript" th:src="@{/js/element.js}"></script>
    <script type="text/javascript" th:src="@{/js/model.js}"></script>
    <script th:src="@{/js/axios.js}"></script>
    <script  th:src="@{/js/qs.min.js}"></script>

    <script>
        function jumpurl(){
            location='http://www.baidu.com';
        }
        function f(){
            vm.i--;
        }
        function getUrlRelativePath(url)
        {
            var arrUrl = url.split("//");

            var start = arrUrl[1].indexOf("/");
            var relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符

            if(relUrl.indexOf("?") != -1){
                relUrl= relUrl.split("?")[0];
            }
            return relUrl;
        }
        var vm = new Vue({
            data: {
                asideData: {},
                header: {},
                main: {isreally: false},
                i:10,
                username:"",

            },
            computed:{
                u(){
                    if(this.i==0){
                        jumpurl();
                    }
                }
            },
            methods: {
                objIsEmpty: function (objectName) {
                    if (Object.keys(objectName).length === 0) {
                        return false // 如果为空,返回false
                    }
                    return true;
                },
                f(){
                    console.log(this.i)
                    this.i--;
                },
                getCurrentUserName(){
                    axios.post("/getCurrentUserName").then(
                        e=>{
                        console.log(e.data)
                    this.username=e.data;
                }
                )
                },
                setInvisibleLinks(){
                    axios.get("/getCurrentUserLevel").then(
                        e => {
                        if (typeof e.data === 'number' && !isNaN(e.data )  ) {
                        var invisibleLinks = Array.prototype.slice.call(document.getElementsByClassName("myNav"));
                        if(e.data==1) {
                            axios.get("/getPermitsAboveSuperUser").then(
                                e1 => {
                                console.log(e1.data);
                            console.log(invisibleLinks);
                            for(i=0;i < invisibleLinks.length;i++){
                                for (j = 0; j < e1.data.length; j++) {
                                    if (getUrlRelativePath(invisibleLinks[i].href) == e1.data[j]) {
                                        invisibleLinks[i].style.display = "none";
                                        break;
                                    }
                                }
                            }
                        });
                        }
                        else if(e.data==2){
                            axios.get("/getPermitsAboveAdmin").then(
                                e1 => {
                                for(i=0;i < invisibleLinks.length;i++){
                                for (j = 0; j < e1.data.length; j++) {
                                    if (getUrlRelativePath(invisibleLinks[i].href) == e1.data[j]) {
                                        invisibleLinks[i].style.display = "none";
                                        break;
                                    }
                                }
                            }
                        });
                        }
                        console.log(e.data);
                        console.log("e.data");
                        for(i=0;i<invisibleLinks.length;i++){
                            if(getUrlRelativePath(invisibleLinks[i].href)=='/TempPermission'){
                                if(e.data!=3) {
                                    invisibleLinks[i].style.display = "none";
                                }
                                invisibleLinks[i].target="_blank";
                                break;
                            }
                        }
                    }
                }
                )
                }
            },
            mounted() {
                this.getCurrentUserName();
                this.setInvisibleLinks();
            }
        })
    </script>

    <link rel="stylesheet" th:href="@{/css/home.css}">

    <title>单臂机吊臂校核计算书</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script th:src="@{/js/jquery-1.7.1.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/pdf.css}">

    <script th:src="@{/js/dataClass.js}"></script>
</head>

<body>
<div id="app">
    <el-container>
        <el-header id="headerBox" style="width:100%;position: fixed;z-index: 10">
            <!--头元素-->
            <el-row :gutter="20">
                <slot th:include="newHtml/model::header"></slot>
            </el-row>
        </el-header>
        <el-container>
            <el-aside id="aside" height='100%' style="z-index: 5">
                <el-row class="tac">
                    <el-col>
                        <div class="side fixed" id="asideBox">
                            <!--左侧导航栏-->
                            <div th:include="newHtml/model::aside"></div>
                        </div>
                    </el-col>
                </el-row>
            </el-aside>
            <el-main>
                <el-row>
                    <!--<nav class="navbar navbar-default" role="head" th:replace="head"></nav>-->
                    <!--<br/><br/>-->
                    <div class="main">
                        <iframe style="display: none" name="stop" src="about:blank"></iframe>
                        <form class="boxform" name="form1" id="form1" th:id="form1" opType="#" target="stop" method="post" enctype="multipart/form-data">
                            <div style="display: block;font-size: 30px;text-align: center;line-height: 30px">单臂机吊臂校核计算书</div>
                            <!- 封面内容 ->
                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td style="width:30%;padding:10px 0;;padding:10px 0;;">项目批令号/方案编号</td>
                                        <td style="width:55%;">
                                            <input type='text' name="sjht" type="text" list="txtBatchId"/>
                                            <datalist id="txtBatchId">
                                            </datalist>
                                        </td>
                                        <td style="width:15%;"><input type="button" name="getData" value="读取"/></td>
                                    </tr>
                                    <tr>
                                        <td colspan="3" style="background-color: #aaa;padding: 10px 0 10px 0"><b>1.封面内容</b></td>
                                    </tr>
                                    <tr>
                                        <td style="width:30%;padding:10px 0;;padding:10px 0;;"><b>名称</b></td>
                                        <td colspan="2" style="width:70%;">内容</td>
                                    </tr>
                                    <tr>
                                        <td ><b>本机计算书编号</b></td>
                                        <td colspan="2" ><input type="text" name="no"/></td>
                                    </tr>
                                    <tr>
                                        <td ><b>本机版本</b></td>
                                        <td colspan="2" ><input type="text" name="ver" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>项目名称</b></td>
                                        <td colspan="2" ><input type="text" name="xmmc" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>主机型号</b></td>
                                        <td colspan="2" ><input type="text" name="zjxh" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>计算人</b></td>
                                        <td colspan="2" ><input type="text" name="jsr" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>审核人</b></td>
                                        <td colspan="2" ><input type="text" name="shr" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>批准人</b></td>
                                        <td colspan="2" ><input type="text" name="pzr" /></td>
                                    </tr>
                                    <tr>
                                        <td ><b>计算日期</b></td>
                                        <td colspan="2" ><input type="text" name="date" /></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>2.基本参数</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂名称简介图" id="dbjbtu1" width="600px" name="dbjbtu1">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂名称简介图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu1" oninput="showImage(this,'dbjbtu1')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>作业高度</b></td>
                                        <td ><p><i>h</i></p></td>
                                        <td ><input type="text" name="h" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>工作状态风压</b></td>
                                        <td ><p><i>p</i></p></td>
                                        <td ><input type="text" name="p" /></td>
                                        <td >N/m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>最大臂长</b></td>
                                        <td ><p><i>L<sub>bd</sub></i></p></td>
                                        <td ><input type="text" name="lbd"/></td>
                                        <td >m</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="2" style="background-color: #aaa;padding: 10px 0 10px 0"><b>3.下拉参数选择</b></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 26%">单臂机吊臂型号选择</td>
                                        <td>
                                            <select name="dbjbModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                            </select>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊船型号选择</td>
                                        <td>
                                            <select name="dcModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                                <option value="其它">其它</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊船钢丝绳型号选择</td>
                                        <td>
                                            <select name="dcgssModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>是否有防风背包</td>
                                        <td>
                                            <select name="ffbbModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                                <option value="有">有</option>
                                                <option value="无">无</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>臂头型号选择</td>
                                        <td>
                                            <select name="btModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                                <option value="其它">其它</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>GRU型号选择</td>
                                        <td>
                                            <select name="gruModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                                <option value="无">无</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>GRU装置在吊臂位置选择</td>
                                        <td>
                                            <select name="gruazModel" style="width:100%;height:40px;text-align-last:center">
                                                <option value="" style="display: none"></option>
                                                <option value="GRU装置在吊臂前销轴前">GRU装置在吊臂前销轴前</option>
                                                <option value="GRU装置在吊臂前销轴后">GRU装置在吊臂前销轴后</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂上各长度示意图" id="dbjbtu3" width="600px" name="dbjbtu3">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂上各长度示意图</td>
                                        <td >
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu3" oninput="showImage(this,'dbjbtu3')"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>4.吊臂相关参数</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂危险截面图" id="dbjbtu2" height="200px"  name="dbjbtu2">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂危险截面图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu2" oninput="showImage(this,'dbjbtu2')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂钢材牌号</b></td>
                                        <td ><p><i> </i></p></td>
                                        <td ><input type="text" name="dbgcph"/></td>
                                        <td > </td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂材料屈服强度</b></td>
                                        <td ><p><i>σ<sub>s</sub></i></p></td>
                                        <td ><input type="text" name="dbss"/></td>
                                        <td >N/mm<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂截面高度</b></td>
                                        <td ><p><i>h</i></p></td>
                                        <td ><input type="text" name="dbjh"/></td>
                                        <td >mm</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂截面宽度</b></td>
                                        <td ><p><i>b</i></p></td>
                                        <td ><input type="text" name="dbjb"/></td>
                                        <td >mm</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂截面厚度</b></td>
                                        <td ><p><i>e</i></p></td>
                                        <td ><input type="text" name="dbje"/></td>
                                        <td >mm</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂最危险截面X向抗弯模量</b></td>
                                        <td ><p><i>W<sub>x</sub></i></p></td>
                                        <td ><input type="text" name="dbwx"/></td>
                                        <td >mm<sup>3</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂最危险截面Y向抗弯模量</b></td>
                                        <td ><p><i>W<sub>y</sub></i></p></td>
                                        <td ><input type="text" name="dbwy"/></td>
                                        <td >mm<sup>3</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂最危险截面X向惯性矩</b></td>
                                        <td ><p><i>I<sub>x</sub></i></p></td>
                                        <td ><input type="text" name="dbix"/></td>
                                        <td >mm<sup>4</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂前支撑点前部长度</b></td>
                                        <td ><p><i>L<sub>m</sub></i></p></td>
                                        <td ><input type="text" name="dblm"/></td>
                                        <td >mm</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂前后支撑点间距</b></td>
                                        <td ><p><i>L<sub>l</sub></i></p></td>
                                        <td ><input type="text" name="dbll"/></td>
                                        <td >mm</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>5.吊臂前支撑点前部载荷</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂前支撑点前部载荷图" id="dbjbtu4" width="600px" name="dbjbtu4">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂前支撑点前部载荷图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu4" oninput="showImage(this,'dbjbtu4')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td>吊船自重</td>
                                        <td><p><i>S<sub>wp</sub></i></p></td>
                                        <td><input type='text' name="swp"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>吊船额定载重量</td>
                                        <td><p><i>R<sub>1</sub></i></p></td>
                                        <td><input type='text' name="r1"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>吊船钢丝绳自重</td>
                                        <td><p><i>M<sub>wr</sub></i></p></td>
                                        <td><input type='text' name="mwr"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>防风背包自重</td>
                                        <td><p><i>m<sub>ffbb</sub></i></p></td>
                                        <td><input type='text' name="mffbb"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>总悬挂载荷</td>
                                        <td><p><i>T<sub>sl</sub></i></p></td>
                                        <td><input type='text' name="tsl"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>物料起升机构额定载重量</td>
                                        <td><p><i>H<sub>wll</sub></i></p></td>
                                        <td><input type='text' name="hwll"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><input style="color: white;" type='text' name="grutstx"/></td>
                                    </tr>
                                    <tr>
                                        <td>物料起升机构钢丝绳自重</td>
                                        <td><p><i>H<sub>sw</sub></i></p></td>
                                        <td><input type='text' name="hsw"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>物料起升机构总悬挂载荷</td>
                                        <td><p><i>T<sub>shl</sub></i></p></td>
                                        <td><input type='text' name="tshl"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>臂头自重</td>
                                        <td><p><i>m<sub>1</sub></i></p></td>
                                        <td><input type='text' name="m1"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>物料起升机构导绳架自重</td>
                                        <td><p><i>m<sub>2</sub></i></p></td>
                                        <td><input type='text' name="m2"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>重锤自重</td>
                                        <td><p><i>m<sub>3</sub></i></p></td>
                                        <td><input type='text' name="m3"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>吊臂前支撑点前部自重</td>
                                        <td><p><i>m<sub>4</sub></i></p></td>
                                        <td><input type='text' name="m4jbcq"/></td>
                                        <td>kg</td>
                                    </tr>
                                    <tr>
                                        <td>物料起升机构装置自重</td>
                                        <td><p><i>m<sub>5</sub></i></p></td>
                                        <td><input type='text' name="m5db"/></td>
                                        <td>kg</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>6.重心至吊臂前支撑点距离</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂重心至吊臂前支撑点距离图" id="dbjbtu6" width="600px" name="dbjbtu6">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂重心至吊臂前支撑点距离图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu6" oninput="showImage(this,'dbjbtu6')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>总悬挂载荷重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>slc</sub></i></p></td>
                                        <td ><input type="text" name="lslc" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构总悬挂载荷重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>shlc</sub></i></p></td>
                                        <td ><input type="text" name="lshlc" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>臂头重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>c1</sub></i></p></td>
                                        <td ><input type="text" name="lc1" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构导绳架重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>c2</sub></i></p></td>
                                        <td ><input type="text" name="lc2" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>重锤重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>c3</sub></i></p></td>
                                        <td ><input type="text" name="lc3" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂前支撑点前部自重重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>c4</sub></i></p></td>
                                        <td ><input type="text" name="lc4" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构装置重心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>c5</sub></i></p></td>
                                        <td ><input type="text" name="lc5" /></td>
                                        <td >m</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>7.迎风面积</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂风载荷示意图" id="dbjbtu5" width="600px" name="dbjbtu5">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂风载荷示意图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu5" oninput="showImage(this,'dbjbtu5')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>总悬挂载荷迎风面积</b></td>
                                        <td ><p><i>A<sub>sl</sub></i></p></td>
                                        <td ><input type="text" name="aslcx" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构总悬挂载荷迎风面积</b></td>
                                        <td ><p><i>A<sub>shl</sub></i></p></td>
                                        <td ><input type="text" name="ashlcx" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>臂头迎风面积</b></td>
                                        <td ><p><i>A<sub>1</sub></i></p></td>
                                        <td ><input type="text" name="acx1" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构导绳架迎风面积</b></td>
                                        <td ><p><i>A<sub>2</sub></i></p></td>
                                        <td ><input type="text" name="acx2" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>重锤迎风面积</b></td>
                                        <td ><p><i>A<sub>3</sub></i></p></td>
                                        <td ><input type="text" name="acx3" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂前支撑点前部自重迎风面积</b></td>
                                        <td ><p><i>A<sub>4</sub></i></p></td>
                                        <td ><input type="text" name="acx4cq" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构装置迎风面积</b></td>
                                        <td ><p><i>A<sub>5</sub></i></p></td>
                                        <td ><input type="text" name="acx5db" /></td>
                                        <td >m<sup>2</sup></td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>8.面心至吊臂前支撑点距离</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂面心至吊臂前支撑点距离图" id="dbjbtu7" width="600px" name="dbjbtu7">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂面心至吊臂前支撑点距离图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu7" oninput="showImage(this,'dbjbtu7')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>总悬挂载荷面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>slx</sub></i></p></td>
                                        <td ><input type="text" name="lslx" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构总悬挂载荷面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>shlx</sub></i></p></td>
                                        <td ><input type="text" name="lshlx" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>臂头面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>x1</sub></i></p></td>
                                        <td ><input type="text" name="lx1" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构导绳架面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>x2</sub></i></p></td>
                                        <td ><input type="text" name="lx2" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>重锤面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>x3</sub></i></p></td>
                                        <td ><input type="text" name="lx3" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>吊臂前支撑点前部自重面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>x4</sub></i></p></td>
                                        <td ><input type="text" name="lx4" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构装置面心至吊臂前支撑点距离</b></td>
                                        <td ><p><i>L<sub>x5</sub></i></p></td>
                                        <td ><input type="text" name="lx5" /></td>
                                        <td >m</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="subtable">
                                <table>
                                    <tr>
                                        <td colspan="4" style="background-color: #aaa;padding: 10px 0 10px 0"><b>9.重心至吊臂前端法兰距离</b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div style="height:200px;text-align: center;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                                                <img alt="吊臂外部载荷重心至吊臂前端法兰距离图" id="dbjbtu8" width="600px" name="dbjbtu8">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>吊臂外部载荷重心至吊臂前端法兰距离图</td>
                                        <td colspan="3">
                                            <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="dbjbtu8" oninput="showImage(this,'dbjbtu8')"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                                        <td style="width:17%;">符号</td>
                                        <td style="width:40%;">数值</td>
                                        <td style="width:17%;">单位</td>
                                    </tr>
                                    <tr>
                                        <td ><b>总悬挂载荷重心至吊臂前端法兰距离</b></td>
                                        <td ><p><i>L<sub>slwq</sub></i></p></td>
                                        <td ><input type="text" name="lslwq" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构总悬挂载荷重心至吊臂前端法兰距离</b></td>
                                        <td ><p><i>L<sub>shlwq</sub></i></p></td>
                                        <td ><input type="text" name="lshlwq" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>臂头重心至吊臂前端法兰距离</b></td>
                                        <td ><p><i>L<sub>wq1</sub></i></p></td>
                                        <td ><input type="text" name="lwq1" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>物料起升机构导绳架重心至吊臂前端法兰距离</b></td>
                                        <td ><p><i>L<sub>wq2</sub></i></p></td>
                                        <td ><input type="text" name="lwq2" /></td>
                                        <td >m</td>
                                    </tr>
                                    <tr>
                                        <td ><b>重锤重心至吊臂前端法兰距离</b></td>
                                        <td ><p><i>L<sub>wq3</sub></i></p></td>
                                        <td ><input type="text" name="lwq3" /></td>
                                        <td >m</td>
                                    </tr>
                                </table>
                            </div>

                            <div style="display: none">
                                <input type="text" name="dcgssp" />
                                <input type="text" name="grugssp" />
                                <input type="text" name="m5" />
                                <input type="text" name="acx5" />
                                <input type="text" name="gruqhxs" />
                                <input type="text" name="lbtzh" />
                                <input type="text" name="ldcgh" />
                                <input type="text" name="ldslzh" />
                                <input type="text" name="mbmj" />
                                <input type="text" name="ldbb" />
                                <input type="text" name="ldbbz" />
                                <input type="text" name="mdbb" />
                                <input type="text" name="adbb" />
                                <input type="text" name="dbmjb" />
                            </div>
                            <input type="hidden" name="pdfType"/>
                        </form>

                        <div class="navbox">
                            <div style="width:600px;height:520px; font-size: 14px   ;">
                                <table id="pdf3tb" style="background-color: rgb(220,220,220)">
                                    <tr>
                                        <td colspan="4" style="padding: 10px 0 10px 0;background-color: rgb(220,220,220);"><b>核算结果</b></td>
                                    </tr>
                                    <tr style="background-color: rgb(220,220,220)">
                                        <td style="width:25%;"><b>名称</b></td>
                                        <td style="width:25%;"><b>标准值</b></td>
                                        <td style="width:25%;"><b>计算值</b></td>
                                        <td style="width:25%;"><b>是否满足</b></td>
                                    </tr>
                                    <tr style="background-color: rgb(220,220,220)">
                                        <td><b>吊臂强度校核</b></td>
                                        <td><p><span id="ssqd"></span>N/mm<sup>2</sup></p></td>
                                        <td><p><span id="smax"></span>N/mm<sup>2</sup></p></td>
                                        <td id="dbm1"></td>
                                    </tr>
                                    <tr style="background-color: rgb(220,220,220)">
                                        <td><b>吊臂挠度校核</b></td>
                                        <td><p><span id="nd"></span>mm</p></td>
                                        <td><p><span id="f"></span>mm</p></td>
                                        <td id="dbm2"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="buttonbox">
                        <input style="cursor: pointer" type="submit"  class="button" type="submit" value="校验" onclick="showjy();return janyan()"/>
                        <input style="cursor: pointer" type="submit" form="form1" class="button" value="保存数据"
                               onclick="isCheck(false);$('form').attr('action','saveValue')"/>
                        <input style="cursor: pointer" type="submit" form="form1" class="button"  value="导出单臂吊臂pdf" onclick="$('form').attr('action','/SingleJib/getPDF');
                                                                                                                isCheck(false);changeType('Calculation')"/>
                        <input style="cursor: pointer" type="submit" form="form1" class="button"  value="导出检验pdf" onclick="$('form').attr('action','/SingleJib/getPDF');
                                                                                                                isCheck(true);changeType('Check')"/>
                        <input style="cursor: pointer" type="reset" form="form1" value="重置" onclick="$('#pdf3tb td[id],#pdf3tb span[id]').text('').css('background-color','#aaa')"/>
                    </div>
                </el-row>
            </el-main>
        </el-container>
    </el-container>
</div>
<script>
    (function () {
        window.htmlData = {};
    })()
</script>
<script th:src="@{/js/home.js}"></script>
<script>
    vm.$mount('#app')
</script>
<script>
    ffbbModelList={
        "有":{
            mffbb:100,
        },
        "无":{
            mffbb:0,
        },
    };
    gruazModelList={
        "GRU装置在吊臂前销轴前":{
            gruqhxs:1,
        },
        "GRU装置在吊臂前销轴后":{
            gruqhxs:0,
        },
    };
</script>

<script type="text/javascript">
    function isNumber(value) {         //验证是否为数字
        var patrn = /^(-)?\d+(\.\d+)?$/;
        if (patrn.exec(value) == null || value == "") {
            return false
        } else {
            return true
        }
    }
    // $(document).ready(function () {
    //     $('#SingleJib').addClass('o-sub-cur');
    // })

    function janyan() {
        $.ajax({
            url: "/SingleJib/jy",
            type: "post",
            data: $("form").serialize(),
            async: false,
            dataType: "json",
            cache: false,
            success: function (data) {
                Object.keys(data).forEach(function (id) {
                    $("#" + id).text(data[id]);
                    if(data[id]=="不满足") $("#" + id).css("background-color","#F55");
                    if(data[id]=="满足") $("#" + id).css("background-color","transparent");
                })
            }
        })
        return false;
    }

    function showImage(form,element) {
        // 先获取用户上传的文件对象
        var fileObj = form.files[0];
        if(fileObj.size>1048576){
            alert("上传文件大于1M，请重新选择");
            form.value="";
            return false;
        }
        // 生成一个文件读取的内置对象
        var fileReader = new FileReader();
        // 将文件对象传递给内置对象
        fileReader.readAsDataURL(fileObj); //这是一个异步执行的过程，所以需要onload回调函数执行读取数据后的操作
        // 将读取出文件对象替换到img标签
        fileReader.onload = function(){  // 等待文件阅读器读取完毕再渲染图片
            $('#'+element).attr('src',fileReader.result).attr('display','inline-block')
        }
    }
</script>

<script>
    function changeType(l){
        var e = $('input[name=pdfType]');
        if (e.length == 0) {
            $('form').append('<input name="pdfType" type="hidden"/>');
        }
        e = $('input[name=pdfType]');
        e.val(l);
    }
    var calculateFunction={
        grutstx: function () {
            if ( gruModel == "GRU285" ) {
                $('[name=grutstx]').prop('disabled', true)
                data.datalist['grutstx'].color = 'white';
                return '物料起升机构极限额定载重量为500kg';
            } else if ( gruModel == "GRU295" ) {
                $('[name=grutstx]').prop('disabled', true)
                data.datalist['grutstx'].color = 'white';
                return '物料起升机构极限额定载重量为750kg';
            } else if ( gruModel == "GRU313" ) {
                $('[name=grutstx]').prop('disabled', true)
                data.datalist['grutstx'].color = 'white';
                return '物料起升机构极限额定载重量为1000kg';
            } else if ( gruModel == "无" ) {
                $('[name=grutstx]').prop('disabled', true)
                data.datalist['grutstx'].color = 'white';
                return '无';
            }
        },

        p:function(){
            return 250 ;
        },
        grugssp:function(){
            if( gruModel =='无')
                return 0;
        },
        m5:function(){
            if( gruModel =='无')
                return 0;
        },
        acx5:function(){
            if( gruModel =='无')
                return 0;
        },
        gruqhxs:function(){
            return gruazModelList[ gruazModel ]['gruqhxs'];
        },

        dbgcph:function(){
            return 'Q355B ' ;
        },
        dbss:function(){
            return 355 ;
        },
        dblm:function(){
            return ( lbd - ldcgh - dbll / 2000 ) * 1000 ;
        },

        swp: function(){
            if( dcModel =='其它')
                return ' ';
        },
        r1:function(){
            if( dcModel =='其它')
                return ' ';
        },
        mwr:function(){
            return h * dcgssp * 4 ;
        },
        mffbb:function(){
            return ffbbModelList[ ffbbModel ]['mffbb'];
        },
        tsl:function (){
            return swp + r1 + mwr + mffbb ;
        },
        hwll:function(){
            if( gruModel =='无')
                return 0 ;
        },
        hsw:function(){
            return h * grugssp ;
        },
        tshl:function(){
            return hwll + hsw ;
        },
        m1:function(){
            if( btModel =='其它')
                return ' ' ;
        },
        m2:function(){
            if( gruModel =='无')
                return 0 ;
        },
        m3:function(){
            return 25 ;
        },
        m4jbcq:function(){
            return  mdbb + ( dblm - ldbbz ) * mbmj / 1000 ;
        },
        m5db:function(){
            return m5 * gruqhxs ;
        },

        lslc:function(){
            return lbd - dbll / 2000 ;
        },
        lshlc:function(){
            return dblm / 1000 + lbtzh ;
        },
        lc1:function(){
            return lshlc ;
        },
        lc2:function(){
            if( m2 == 0 ){
                return 0 ;
            }else {
                return dblm / 1000 + ldslzh ;
            }
        },
        lc3:function(){
            return lshlc ;
        },
        lc4:function(){
            return ( mdbb * ( dblm - ldbb ) / 1000 + ( dblm - ldbbz ) * mbmj * ( dblm - ldbbz ) / 2000000 ) / m4jbcq ;
        },
        lc5:function(){
            if( m5db == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },

        aslcx:function(){
            if( dcModel =='其它')
                return ' ' ;
        },
        acx1:function(){
            if( btModel =='其它')
                return ' ' ;
        },
        acx2:function(){
            if( gruModel =='无')
                return 0 ;
        },
        acx3:function(){
            return 0.05 ;
        },
        acx4cq:function(){
            return adbb + dbjh * ( dblm - ldbbz ) / 1000000 ;
        },
        acx5db:function(){
            return acx5 * gruqhxs ;
        },

        lslx:function(){
            return lslc ;
        },
        lshlx:function(){
            return lshlc ;
        },
        lx1:function(){
            return lc1 ;
        },
        lx2:function(){
            return lc2 ;
        },
        lx3:function(){
            return lc3 ;
        },
        lx4:function(){
            return lc4 ;
        },
        lx5:function(){
            return lc5 ;
        },

        lslwq:function(){
            return lslc - dblm / 1000 ;
        },
        lshlwq:function(){
            return lshlc - dblm / 1000 ;
        },
        lwq1:function(){
            return lc1 - dblm / 1000 ;
        },
        lwq2:function(){
            if( m2 == 0 ){
                return 0 ;
            }else {
                return lc2 - dblm / 1000 ;
            }
        },
        lwq3:function(){
            return lc3 - dblm / 1000 ;
        },
    };
    getTable("dbjbModel","dbxzd");
    getTable("btModel","btxz");
    getTable("dcModel","dcxz");
    getTable("dcgssModel","dcgssxz");
    getTable("gruModel","gruxz");
    data.init(calculateFunction);

</script>

<script>
    $('input[name="getData"]').click(function () {
            var url = '/SingleJib/getData';
            var id = $('input[name="sjht"]').val();
            getData.geteDataFromDB(url, id)
        }
    )
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" ){
            filename="DB(200-300).png";
        }else if ( dbjbModel=="DB(250*400)" ){
            filename="DB(250-400).png";
        }else if ( dbjbModel=="DB(300*500)" ){
            filename="DB(300-500).png";
        }else if ( dbjbModel=="DB(400*600)" ){
            filename="DB(400-600).png";
        }
        if ($('input[name=tu_dbjbtu2]').length == 0) {
            $('form').append('<input name="tu_dbjbtu2" type="hidden"/>');
        }
        $("[name=tu_dbjbtu2]")[0].value=filename;
        $("[name=dbjbtu2]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu1.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu1-1.png";
        }
        if ($('input[name=tu_dbjbtu1]').length == 0) {
            $('form').append('<input name="tu_dbjbtu1" type="hidden"/>');
        }
        $("[name=tu_dbjbtu1]")[0].value=filename;
        $("[name=dbjbtu1]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu3.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu3-1.png";
        }
        if ($('input[name=tu_dbjbtu3]').length == 0) {
            $('form').append('<input name="tu_dbjbtu3" type="hidden"/>');
        }
        $("[name=tu_dbjbtu3]")[0].value=filename;
        $("[name=dbjbtu3]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu4.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu4-1.png";
        }
        if ($('input[name=tu_dbjbtu4]').length == 0) {
            $('form').append('<input name="tu_dbjbtu4" type="hidden"/>');
        }
        $("[name=tu_dbjbtu4]")[0].value=filename;
        $("[name=dbjbtu4]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu5.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu5-1.png";
        }
        if ($('input[name=tu_dbjbtu5]').length == 0) {
            $('form').append('<input name="tu_dbjbtu5" type="hidden"/>');
        }
        $("[name=tu_dbjbtu5]")[0].value=filename;
        $("[name=dbjbtu5]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu6.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu6-1.png";
        }
        if ($('input[name=tu_dbjbtu6]').length == 0) {
            $('form').append('<input name="tu_dbjbtu6" type="hidden"/>');
        }
        $("[name=tu_dbjbtu6]")[0].value=filename;
        $("[name=dbjbtu6]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu7.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu7-1.png";
        }
        if ($('input[name=tu_dbjbtu7]').length == 0) {
            $('form').append('<input name="tu_dbjbtu7" type="hidden"/>');
        }
        $("[name=tu_dbjbtu7]")[0].value=filename;
        $("[name=dbjbtu7]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>
<script>
    $("[name=dbjbModel]").change(function () {
        var dbjbModel=$("[name=dbjbModel]")[0].value;
        var filename="";
        if( dbjbModel=="DB(200*300)" || dbjbModel=="DB(250*400)" ){
            filename="dbjbtu8.png";
        }else if ( dbjbModel=="DB(300*500)" || dbjbModel=="DB(400*600)" ){
            filename="dbjbtu8-1.png";
        }
        if ($('input[name=tu_dbjbtu8]').length == 0) {
            $('form').append('<input name="tu_dbjbtu8" type="hidden"/>');
        }
        $("[name=tu_dbjbtu8]")[0].value=filename;
        $("[name=dbjbtu8]")[0].src="/pdf/getImg?filename="+ filename+"";
    })
</script>

</body>
</html>