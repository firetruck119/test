<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>配重计算书</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script th:src="@{js/jquery-1.7.1.min.js}"></script>
    <script th:src="@{js/jquery-ui-1.8.16.custom.min.js}"></script>
<!--    <script th:src="@{js/vue.js}"></script>-->
    <script th:src="@{js/xyz/jquery.Ajax.Form.js}"></script>
    <link th:href="@{css/page.css}" rel="stylesheet"/>
    <link th:href="@{css/kolibre.min.css}" rel="stylesheet"/>
    <link th:href="@{css/kolibre2.min.css}" rel="stylesheet"/>
    <link th:href="@{css/base.min.css}" rel="stylesheet"/>
    <link th:href="@{css/public_offline.css}" rel="stylesheet"/>
    <script th:src="@{js/dataClass.js}" ></script>
    <script th:src="@{js/axios.js}"></script>
    <style type="text/css">
        p{
            font-size: 17px;
        }
        b{
            letter-spacing:1px;
            line-height: normal;
        }
        .main {
            margin:20px 480px 100px;
            width:1250px;
            background-color:white;
            font-size: 0;
            border:1px solid black;
        }
        .boxform{
            margin:auto;
            width:1230px;
            display: block;
            font-size: 0;
            padding: 10px 0 0 10px;
        }
        .main .boxform div{
            display: inline-block;
            font-size: 14px;
            margin: 0 10px 10px 0;
            vertical-align: top;
        }
        td{
            border:1px solid #000;
            text-align: center;
            line-height: 14px;
            height:20px;
        }
        tr{
            height: 20px;
        }
        table{
            border-radius: 5px;
            width:100%;
            background-color: #aaa;
        }
        input {
            height: 20px;
            width:95%;
            border: 0;
            text-align: center;
        }
        .buttonbox{
            bottom: 5px;
            right:5px;
            display: block;
            position: fixed;
            margin-bottom: 5px;
        }
        .buttonbox input,.navbox input{
            background-color: #ccc;
            display: block;
            width:140px;
            height: 50px;
            margin: 5px;
            border-radius:25px;
        }
        .navbox{
            top: 50%;;
            left:10px;
            display: block;
            position: fixed;
            margin-top: -160px;
            font-size: 16px;
        }
        .navbox td{
            padding: 0.4em 0.8em;
        }
        input::-webkit-input-placeholder { /* WebKit browsers 适配谷歌 */
            color: #f00;
        }
        input:-moz-placeholder { /* Mozilla Firefox 4 to 18 适配火狐 */
            color: #f00;
        }
        input::-moz-placeholder { /* Mozilla Firefox 19+ 适配火狐 */
            color: #f00;
        }
        input:-ms-input-placeholder { /* Internet Explorer 10+  适配ie*/
            color: #f00;
        }

    </style>
    <script>
        ffbbModelList={
            "有":{
                mffbb:100,
            },
            "无":{
                mffbb:0,
            },
        };
        yxjgazModelList= {
            "对角安装": {
                yxjgaz: "对角安装",
            },
            "同侧安装": {
                yxjgaz: "同侧安装",
            },
        }
        ydpzModelList= {
            "是": {
                ydpz: "是",
            },
            "否": {
                ydpz: "否",
            },
        };
    </script>

     <script type="text/javascript">
        function isNumber(value) {         //验证是否为数字
            var patrn = /^(-)?\d+(\.\d+)?$/;
            if (patrn.exec(value) == null || value == "") {
                return false
            } else {
                return true
            }
        }
        $(document).ready(function () {
            InitNav(4)
            $('#Counterweights').addClass('o-sub-cur');
        })

        function janyan() {
            $.ajax({
                url: "Counterweights/jy",
                type: "post",
                data: $("form").serialize(),
                async: false,
                dataType: "json",
                cache: false,
                success: function (data) {
                    Object.keys(data).forEach(function (id) {
                        $("#" + id).text(data[id]);
                    })
                }
            })
            return false;
        }

        function showImage(form,element) {
            // 先获取用户上传的文件对象
            var fileObj = form.files[0];
            if(fileObj.size>1048576){
                alert("上传文件大于1M，请重新选择");
                form.value="";
                return false;
            }
            // 生成一个文件读取的内置对象
            var fileReader = new FileReader();
            // 将文件对象传递给内置对象
            fileReader.readAsDataURL(fileObj); //这是一个异步执行的过程，所以需要onload回调函数执行读取数据后的操作
            // 将读取出文件对象替换到img标签
            fileReader.onload = function(){  // 等待文件阅读器读取完毕再渲染图片
                $('#'+element).attr('src',fileReader.result).attr('display','inline-block')
            }
        }
    </script>
</head>

<body>
<nav class="navbar navbar-default" role="head" th:replace="head"></nav>
<br/><br/>
<div class="main">
    <iframe style="display: none" name="stop" src="about:blank"></iframe>
    <form class="boxform" name="form1" id="form1" th:id="form1" opType="#" target="stop" method="post" enctype="multipart/form-data">
        <div style="display: block;font-size: 30px;text-align: center;line-height: 30px">配重计算书</div>
        <!- 封面内容 ->
        <div style="width:600px;">
            <table>
                <tr>
                    <td style="width:40%;padding:10px 0;;padding:10px 0;;">项目批令号/方案编号</td>
                    <td style="width:40%;">
                        <input type='text' name="sjht" type="text" list="txtBatchId"/>
                        <datalist id="txtBatchId">
                        </datalist>
                    </td>
                    <td style="width:20%;"><input type="button" name="getData" value="读取"/></td>
                    <script>
                        $('input[name="getData"]').click(function () {
                                var url = '/Counterweights/getData';
                                var id = $('input[name="sjht"]').val();
                                getData.geteDataFromDB(url, id)
                            }
                        )
                    </script>
                </tr>
                <tr>
                    <td colspan="5" style="background-color: #aaa;padding: 10px 0 10px 0"><b>1.封面内容</b></td>
                </tr>
                <tr>
                    <td style="width:50%;padding:10px 0;;padding:10px 0;;"><b>名称</b></td>
                    <td colspan="5">内容</td>
                </tr>
                <tr>
                    <td ><b>本机计算书编号</b></td>
                    <td colspan="5"><input type="text" name="no"/></td>
                </tr>
                <tr>
                    <td ><b>本机版本</b></td>
                    <td colspan="5"><input type="text" name="ver" /></td>
                </tr>
                <tr>
                    <td ><b>项目名称</b></td>
                    <td colspan="5"><input type="text" name="xmmc" /></td>
                </tr>
                <tr>
                    <td ><b>主机型号</b></td>
                    <td colspan="5"><input type="text" name="zjxh" /></td>
                </tr>
                <tr>
                    <td ><b>计算人</b></td>
                    <td colspan="5"><input type="text" name="jsr" /></td>
                </tr>
                <tr>
                    <td ><b>审核人</b></td>
                    <td colspan="5"><input type="text" name="shr" /></td>
                </tr>
                <tr>
                    <td ><b>批准人</b></td>
                    <td colspan="5"><input type="text" name="pzr" /></td>
                </tr>
                <tr>
                    <td ><b>计算日期</b></td>
                    <td colspan="5"><input type="text" name="date" /></td>
                </tr>
            </table>
        </div>

        <div style="width:600px;">
            <table>
                <tr>
                    <td colspan="5" style="background-color: #aaa;padding: 10px 0 10px 0"><b>2.基本参数</b></td>
                </tr>
                <tr>
                    <td>吊船型号选择</td>
                    <td colspan="4">
                        <select name="dcModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="其它">其它</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>吊船钢丝绳型号选择</td>
                    <td colspan="4">
                        <select name="dcgssModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="其它">其它</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>是否有防风背包</td>
                    <td colspan="4">
                        <select name="ffbbModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="有">有</option>
                            <option value="无">无</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>臂头型号选择</td>
                    <td colspan="4">
                        <select name="btModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="其它">其它</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>运行机构选择</td>
                    <td colspan="4">
                        <select name="trippingModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="无">无</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>运行机构安装位置</td>
                    <td colspan="4">
                        <select name="yxjgazModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="对角安装">对角安装</option>
                            <option value="同侧安装">同侧安装</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>是否是移动配重</td>
                    <td colspan="4">
                        <select name="ydpzModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="是">是</option>
                            <option value="否">否</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>起升机构选择</td>
                    <td colspan="4">
                        <select name="qsjgModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="无">无</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>GRU型号选择</td>
                    <td colspan="4">
                        <select name="gruModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="无">无</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>大回转机构选择</td>
                    <td colspan="4">
                        <select name="dhzjgModel" style="width:100%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td>大臂选择</td>
                    <td colspan="4">
                        <select name="dbType" style="width:49%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="其他">其他</option>
                        </select>
                        <select name="dbModel" style="width:49%;height:40px;text-align-last:center">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>立柱选择</td>
                    <td colspan="4">
                        <select name="lzType" style="width:49%;height:40px;text-align-last:center">
                            <option value="" style="display: none"></option>
                            <option value="其他">其他</option>
                        </select>
                        <select name="lzModel" style="width:49%;height:40px;text-align-last:center">
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                    <td style="width:17%;">符号</td>
                    <td style="width:40%;">数值</td>
                    <td style="width:17%;">单位</td>
                </tr>
                <tr>
                    <td ><b>作业高度</b></td>
                    <td ><p><i>h</i></p></td>
                    <td ><input type="text" name="h" /></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>最大工作臂长</b></td>
                    <td ><p><i>Lbd</i></p></td>
                    <td ><input type="text" name="lbd" /></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>最小工作臂长</b></td>
                    <td ><p><i>Lbx</i></p></td>
                    <td ><input type="text" name="lbx" /></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>大臂仰角</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="dbyj"/></td>
                    <td >度</td>
                </tr>
                <!--<tr>-->
                    <!--<td ><b>停机臂长+配重臂总长</b></td>-->
                    <!--<td ><p><i></i></p></td>-->
                    <!--<td ><input type="text" name="ltjbpz"/></td>-->
                    <!--<td >m</td>-->
                <!--</tr>-->
                <tr>
                    <td ><b>最大配重臂长</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="lbp"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>最小配重臂长</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="lbpx"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>立柱总高度</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="llzgd"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>内立柱高度</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="llzgdn"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>外立柱高度</b></td>
                    <td ><p><i></i></p></td>
                    <td ><input type="text" name="llzgdw"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>轨距</b></td>
                    <td ><p><i>Lg</i></p></td>
                    <td ><input type="text" name="lg"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>轮距</b></td>
                    <td ><p><i>Ll</i></p></td>
                    <td ><input type="text" name="ll"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>配重计算系数</b></td>
                    <td ><p><i>n</i></p></td>
                    <td ><input type="text" name="npz"/></td>
                    <td ></td>
                </tr>
                </table>
            </div>

                <div style="width:600px;">
                    <table>
                <tr>
                    <td colspan="5" style="background-color: #aaa;padding: 10px 0 10px 0"><b>3.各部件重量</b></td>
                </tr>
                <div style="width:600px;height:350px;text-align: center;font-size: 14px;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                     <img alt="工作状态擦窗机各部件重量示意图" id="wdlytu2" height="300px"  name="wdlytu2">
                </div>
                <tr>
                     <td>工作状态载荷示意图</td>
                     <td colspan="4">
                          <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="wdlytu2" oninput="showImage(this,'wdlytu2')"/>
                     </td>
                </tr>
                <tr>
                    <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                    <td style="width:17%;">符号</td>
                    <td style="width:40%;">数值</td>
                    <td style="width:17%;">单位</td>
                </tr>
                <tr>
                        <td ><b>吊船自重</b></td>
                        <td ><p><i>Swp</i></p></td>
                        <td ><input type="text" name="swp"/></td>
                        <td >kg</td>
                 </tr>
                <tr>
                <td ><b>吊船额定载重量</b></td>
                <td ><p><i>R1</i></p></td>
                <td ><input type="text" name="r1"/></td>
                <td >kg</td>
            </tr>
                <tr>
                    <td ><b>吊船钢丝绳自重</b></td>
                    <td ><p><i>Mwr</i></p></td>
                    <td ><input type="text" name="mwr"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>防风背包自重</b></td>
                    <td ><p><i>mffbb</i></p></td>
                    <td ><input type="text" name="mffbb"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>总悬挂载荷</b></td>
                    <td ><p><i>Tsl</i></p></td>
                    <td ><input type="text" name="tsl"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构额定载重量</b></td>
                    <td ><p><i>Hwll</i></p></td>
                    <td ><input type="text" name="hwll"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构钢丝绳自重</b></td>
                    <td ><p><i>Hsw</i></p></td>
                    <td ><input type="text" name="hsw"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构总悬挂载荷</b></td>
                    <td ><p><i>Tshl</i></p></td>
                    <td ><input type="text" name="tshl"/></td>
                    <td >kg</td>
                </tr>
                        <tr><td colspan="5" style="line-height: 20px">gru285额定载荷600<br/>gru295额定载荷750<br/>gru313额定载荷1000</td></tr>
                <tr>
                    <td ><b>臂头自重</b></td>
                    <td ><p><i>m1</i></p></td>
                    <td ><input type="text" name="m1"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构导绳架自重</b></td>
                    <td ><p><i>m2</i></p></td>
                    <td ><input type="text" name="m2"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>安全绳自重</b></td>
                    <td ><p><i>m3</i></p></td>
                    <td ><input type="text" name="m3"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>大臂自重</b></td>
                    <td ><p><i>m4</i></p></td>
                    <td ><input type="text" name="m4"/></td>
                    <td >kg</td>
                </tr>
                <tr><td colspan="5">备注：伸缩臂每节臂搭接量长度为伸出部分长度的一半</td></tr>
                <tr>
                    <td ><b>物料起升机构装置自重</b></td>
                    <td ><p><i>m5</i></p></td>
                    <td ><input type="text" name="m5"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>伸缩液压缸自重</b></td>
                    <td ><p><i>m6</i></p></td>
                    <td ><input type="text" name="m6"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>仰臂液压缸自重</b></td>
                    <td ><p><i>m7</i></p></td>
                    <td ><input type="text" name="m7"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>顶升液压缸自重</b></td>
                    <td ><p><i>m8</i></p></td>
                    <td ><input type="text" name="m8"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>大回转机构自重</b></td>
                    <td ><p><i>m9</i></p></td>
                    <td ><input type="text" name="m9"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>配重臂自重</b></td>
                    <td ><p><i>m10</i></p></td>
                    <td ><input type="text" name="m10"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>立柱自重</b></td>
                    <td ><p><i>m12</i></p></td>
                    <td ><input type="text" name="m12"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>起升机构自重</b></td>
                    <td ><p><i>m13</i></p></td>
                    <td ><input type="text" name="m13"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>油箱自重</b></td>
                    <td ><p><i>m14</i></p></td>
                    <td ><input type="text" name="m14"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>底架自重</b></td>
                    <td ><p><i>m15</i></p></td>
                    <td ><input type="text" name="m15" undb="undb" /></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>主动运行1自重</b></td>
                    <td ><p><i>m16</i></p></td>
                    <td ><input type="text" name="m16"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>主动运行2自重</b></td>
                    <td ><p><i>m17</i></p></td>
                    <td ><input type="text" name="m17"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>被动运行1自重</b></td>
                    <td ><p><i>m18</i></p></td>
                    <td ><input type="text" name="m18"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>被动运行2自重</b></td>
                    <td ><p><i>m19</i></p></td>
                    <td ><input type="text" name="m19"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>其它I自重</b></td>
                    <td ><p><i>m20</i></p></td>
                    <td ><input type="text" name="m20"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                    <td ><b>其它II自重</b></td>
                    <td ><p><i>m21</i></p></td>
                    <td ><input type="text" name="m21"/></td>
                    <td >kg</td>
                </tr>
                <tr>
                     <td ><b>其它I名称</b></td>
                     <td ><p><i></i></p></td>
                     <td ><input type="text" name="qt1" definevalue="其它I"/></td>
                     <td ></td>
                </tr>
                <tr>
                     <td ><b>其它II名称</b></td>
                     <td ><p><i></i></p></td>
                     <td ><input type="text" name="qt2" definevalue="其它II"/></td>
                     <td ></td>
                 </tr>
            </table>
        </div>

        <div style="display: none">
            <input type="text" name="yxjgaz" />
            <input type="text" name="dcgssp" />
            <input type="text" name="grugssp" />
            <input type="text" name="lbtzh" />
            <input type="text" name="ldcgh" />
            <input type="text" name="ldslzh" />
            <input type="text" name="lxtz" />
            <input type="text" name="lxtm" />
            <input type="text" name="ldjm" />
            <input type="text" name="ldbm" />
            <input type="text" name="hzzcxh" />
            <input type="text" name="mbgj"/>
            <input type="text" name="mbmj"/>
            <input type="text" name="ldbbz"/>
            <input type="text" name="mbg1"/>
            <input type="text" name="mbm1"/>
            <input type="text" name="mbm2"/>
            <input type="text" name="mbm3"/>
            <input type="text" name="mbm4"/>
            <input type="text" name="mbg1"/>
            <input type="text" name="mbg2"/>
            <input type="text" name="mbg3"/>
            <input type="text" name="mbg4"/>
            <input type="text" name="mdbb"/>
            <input type="text" name="mlz1gd"/>
            <input type="text" name="lz1mmzl"/>
            <input type="text" name="lz2mmzl"/>
            <input type="text" name="myzjg"/>
            <input type="text" name="lbj"/>
        </div>

        <div style="width:600px;">
             <table>
                 <tr>
                     <td colspan="5" style="background-color: #aaa;padding: 10px 0 10px 0"><b>4.工作状态各部件重心至前轨距离</b></td>
                 </tr>
                 <div style="width:600px;height:350px;text-align: center;font-size: 14px;padding: 10px 0 10px 0;overflow: hidden;border:1px solid #aaa;">
                     <img alt="工作状态擦窗机各部件重心至前轨距离" id="wdlytu3" height="300px"  name="wdlytu3">
                 </div>
                 <tr>
                     <td>工作状态部件重心至前轨距离示意图</td>
                     <td colspan="4">
                         <input type="file" style="height:40px ;line-height: 40px;" accept="image/*" name="wdlytu3" oninput="showImage(this,'wdlytu3')"/>
                     </td>
                 </tr>
                 <tr>
                      <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                      <td style="width:17%;">符号</td>
                      <td style="width:40%;">数值</td>
                      <td style="width:17%;">单位</td>
                 </tr>
                <tr>
                    <td ><b>吊船及人员至前轨道距离</b></td>
                    <td ><p><i>Lslq</i></p></td>
                    <td ><input type="text" name="lslqg"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>物料至前轨道距离</b></td>
                    <td ><p><i>Lshlq</i></p></td>
                    <td ><input type="text" name="lshlqg"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>臂头至前轨道距离</b></td>
                    <td ><p><i>Lq1</i></p></td>
                    <td ><input type="text" name="lqg1"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构导绳架至前轨道距离</b></td>
                    <td ><p><i>Lq2</i></p></td>
                    <td ><input type="text" name="lqg2"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>安全绳至前轨道距离</b></td>
                    <td ><p><i>Lq3</i></p></td>
                    <td ><input type="text" name="lqg3"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>大臂至前轨道距离</b></td>
                    <td ><p><i>Lq4</i></p></td>
                    <td ><input type="text" name="lqg4"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>物料起升机构装置至前轨道距离</b></td>
                    <td ><p><i>Lq5</i></p></td>
                    <td ><input type="text" name="lqg5"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>伸缩液压缸至前轨道距离</b></td>
                    <td ><p><i>Lq6</i></p></td>
                    <td ><input type="text" name="lqg6"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>仰臂液压缸至前轨道距离</b></td>
                    <td ><p><i>Lq7</i></p></td>
                    <td ><input type="text" name="lqg7"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>顶升液压缸至前轨道距离</b></td>
                    <td ><p><i>Lq8</i></p></td>
                    <td ><input type="text" name="lqg8"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>大回转机构至前轨道距离（如果不在立柱重心，此处数据需手动修改）</b></td>
                    <td ><p><i>Lq9</i></p></td>
                    <td ><input type="text" name="lqg9"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>配重臂至前轨道距离</b></td>
                    <td ><p><i>Lq10</i></p></td>
                    <td ><input type="text" name="lqg10"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>配重至前轨道距离</b></td>
                    <td ><p><i>Lq11</i></p></td>
                    <td ><input type="text" name="lqg11"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>立柱至前轨道距离</b></td>
                    <td ><p><i>Lq12</i></p></td>
                    <td ><input type="text" name="lqg12"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>起升机构至前轨道距离</b></td>
                    <td ><p><i>Lq13</i></p></td>
                    <td ><input type="text" name="lqg13"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>油箱至前轨道距离</b></td>
                    <td ><p><i>Lq14</i></p></td>
                    <td ><input type="text" name="lqg14"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>底架至前轨道距离</b></td>
                    <td ><p><i>Lq15</i></p></td>
                    <td ><input type="text" name="lqg15"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>主动运行1至前轨道距离</b></td>
                    <td ><p><i>Lq16</i></p></td>
                    <td ><input type="text" name="lqg16"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>主动运行2至前轨道距离</b></td>
                    <td ><p><i>Lq17</i></p></td>
                    <td ><input type="text" name="lqg17"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>被动运行1至前轨道距离</b></td>
                    <td ><p><i>Lq18</i></p></td>
                    <td ><input type="text" name="lqg18"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>被动运行2至前轨道距离</b></td>
                    <td ><p><i>Lq19</i></p></td>
                    <td ><input type="text" name="lqg19"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>其它I至前轨道距离</b></td>
                    <td ><p><i>Lq20</i></p></td>
                    <td ><input type="text" name="lqg20"/></td>
                    <td >m</td>
                </tr>
                <tr>
                    <td ><b>其它II至前轨道距离</b></td>
                    <td ><p><i>Lq21</i></p></td>
                    <td ><input type="text" name="lqg21"/></td>
                    <td >m</td>
                </tr>

             </table>
        </div>

        <div style="width:1220px;text-align: center;font-size: 14px;background-color: #aaa;padding: 10px 0 10px 0;"><b>计算结果</b></div>

        <div style="width:600px;">
             <table>
                   <tr>
                        <td colspan="5" style="background-color: #aaa;padding: 10px 0 10px 0"><b>5.配重质量</b></td>
                   </tr>
                   <tr>
                        <td style="width:26%;padding:10px 0;;"><b>名称</b></td>
                        <td style="width:17%;">符号</td>
                        <td style="width:40%;">数值</td>
                        <td style="width:17%;">单位</td>
                   </tr>
                 <tr>
                     <td ><b>配重实际取值</b></td>
                     <td ><p><i>m11</i></p></td>
                     <td ><input type="text" name="m11"/></td>
                     <td >kg</td>
                 </tr>
                 <tr >
                     <td style="line-height: 40px;"><b>配重计算质量</b></td>
                     <td ><p><i>m11s</i></p></td>
                     <td id="m11s" ></td>
                     <td >kg</td>
                 </tr>
            </table>
            <input style="background-color: #ccc;display: block;width:140px;height: 50px;margin: 5px;border-radius:25px;margin-left: -180px;margin-top: -50px" class="button" type="submit" value="配重计算值" onclick="return janyan()"/>
        </div>
    </form>


</div>
<div class="navbox" style="position:relative;bottom:300px;top:auto;height:1px">
    <div style="width:460px;height:1px; font-size: 14px   ;">
        <table id="pdf3tb">
            <tr>
                <td colspan="5" style="padding: 10px 0 10px 0;background-color: #aaa;"><b>核算结果</b></td>
            </tr>
            <tr>
                <td style="width:40%;"><b>名称</b></td>
                <td style="width:40%;"><b>数值</b></td>
            </tr>
            <tr>
                <td><b>静载试验状态是否有反拔力</b></td>
                <td id="pzyzy1"></td>
            </tr>
            <tr>
                <td><b>停机状态是否有反拔力</b></td>
                <td id="pzyzy2"></td>
            </tr>
            <tr>
                <td><b>配重是否满足要求</b></td>
                <td id="pzyzm"></td>
            </tr>
        </table>
        <div style="margin: 0 50px 0;">
            <input type="submit"  class="button" type="submit" value="校验" onclick="return janyan()"/>
        </div>
    </div>
</div>
    <div class="buttonbox">
        <input type="submit" form="form1" class="button"  value="导出配重计算书pdf" onclick="$('form').attr('action','Counterweights/getPDF');
                                                                                            isCheck(false);changeType('PeiZhong')"/>
        <input type="submit" form="form1" class="button"  value="导出无图版配重计算书pdf" onclick="$('form').attr('action','Counterweights/getPDF');
                                                                                            isCheck(false);changeType('PeiZhongWuTu')"/>
        <input type="submit" form="form1" class="button"  value="导出验证部分pdf" onclick="$('form').attr('action','Counterweights/getPDF');
                                                                                            isCheck(true);changeType('Check')"/>
        <input type="reset" form="form1" value="重置" onclick="$('#pdf3tb td[id]').text('')"/>
    </div>
<script>
    function changeType(l){
        var e = $('input[name=pdfType]');
        if (e.length == 0) {
            $('form').append('<input name="pdfType" type="hidden"/>');
        }
        e = $('input[name=pdfType]');
        e.val(l);
    }

    $('[name=lzType]').change((e)=> {
        var $element = $(e.target);
        var val = $element.val();
        if (val.indexOf("仰臂固定立柱") <= -1) {
            $('[name=dbyj]').attr("readonly", true);
            data.datalist["dbyj"].color = "#bbb";
        } else {
            $('[name=dbyj]').attr("readonly", false);
            data.datalist["dbyj"].color = "#FFF";
        }
        if (val != '1+1顶升立柱数据库') {
            $('[name=llzgdn],[name=llzgdw]').attr("readonly", true);
            data.datalist["llzgdn"].color = "#bbb";
            data.datalist["llzgdw"].color = "#bbb";
        } else {
            $('[name=llzgdn],[name=llzgdw]').attr("readonly", false);
            data.datalist["llzgdn"].color = "#FFF";
            data.datalist["llzgdw"].color = "#FFF";
        }
        if (val.indexOf("1+1顶升立柱数据库") > -1) {
            $('[name=llzgd]').attr("readonly", true);
            data.datalist["llzgd"].color = "#bbb";
        } else {
            $('[name=dbyj]').attr("readonly", false);
            data.datalist["llzgd"].color = "#FFF";
        };
    })

    $('[name=ydpzModel]').change((e)=>{
        var $element=$(e.target);
        var val=$element.val();
        if(val.indexOf("是")<=-1){
            $('[name=lbpx]').attr("readonly",true);
            data.datalist["lbpx"].color="#bbb";
        }else{
            $('[name=lbpx]').attr("readonly",false);
            data.datalist["lbpx"].color="#FFF";
        }
    })
    var calculateFunction={
        mwr:function() {
            return h * dcgssp * 4 ;
        },

        mffbb:function(){
            return ffbbModelList[ ffbbModel ]['mffbb'];
        },
        tsl:function (){
            var o= swp + r1 + mwr + mffbb ;
            switch ( gruModel ) {
                case 'GRU285':temp=600;break;
                case 'GRU295':temp=750;break;
                case 'GRU313':temp=1000;break;
            }
            if(o>temp){
                o=data.datalist['tsl'].val='';
                $('[name=tsl]').attr('placeholder','超过GRU额定载荷').val('')
            }else{
                $('[name=tsl]').attr('placeholder','')
            }
            return o;
        },
        hsw:function(){
            return h * grugssp ;
        },
        tshl:function(){
            return hwll + hsw ;
        },
        m3:function(){
            return  h * 0.203 ;
        },
        lxtz:()=>{
            return lbd - lbx ;
        },
        lxtm:()=>{
            if ( dbModel &&dbModel.indexOf('1+1伸缩臂')>-1) return lxtz ;
            if ( dbModel &&dbModel.indexOf('2+1伸缩臂')>-1) return lxtz /2;
            if ( dbModel &&dbModel.indexOf('3+1伸缩臂')>-1) return lxtz /3;
            if ( dbModel &&dbModel.indexOf('4+1伸缩臂')>-1) return lxtz /4;
        },
        ldjm:()=>{
            return lxtm /2;
        },
        ldbm:()=>{
            return lxtm + ldjm ;
        },
        m4:()=>{
            var data;
            if( dbModel .indexOf('DB')>-1 && lbd ) data=mdbb+mbmj*(lbd-ldbbz/1000);
            if( dbModel .indexOf('1+1伸缩臂')>-1&& lbj ) data=mbgj+mbmj*lbj+mbg1+ldbm*mbm1 ;
            if( dbModel .indexOf('2+1伸缩臂')>-1 && lbj ) data=mbgj+mbmj*lbj+mbg1+mbg2+ldbm*(mbm1+mbm2);
            if( dbModel .indexOf('3+1伸缩臂')>-1 && lbj ) data=mbgj+mbmj*lbj+mbg1+mbg2+mbg3+ldbm*(mbm1+mbm2+mbm3);
            if( dbModel .indexOf('4+1伸缩臂')>-1 && lbj ) data=mbgj+mbmj*lbj+mbg1+mbg2+mbg3+mbg4+ldbm*(mbm1+mbm2+mbm3+mbm4);
            return data;
        },
        m6:()=>{
            if ( dbType .indexOf('单臂')>-1)
                return 0;
        },
        m7:()=>{
            if ( lzType .indexOf('固定')>-1 ||
                 lzType .indexOf('1+1顶升')>-1||
                 lzType .indexOf('仰柱机构')>-1)
                return 0;
    },
       m8:()=>{
           if ( lzType .indexOf('固定')>-1 ||
                lzType .indexOf('仰臂固定')>-1 ||
                lzType .indexOf('仰柱机构')>-1)
               return 0;
    },
       m10:()=>{
           if ( lzType .indexOf('固定')>-1 ||
                 lzType .indexOf('1+1顶升')>-1 ||
                 lzType .indexOf('仰柱机构')>-1)
                return 0;
    },
        m12:()=>{
            if( lzType .indexOf('仰臂固定')>-1)return mlz1gd + llzgd * lz1mmzl ;
            if( lzType .indexOf('固定')>-1)   return mlz1gd + llzgd * lz1mmzl ;
            if( lzType .indexOf('1+1顶升')>-1)return mlz1gd + llzgdn * lz1mmzl + llzgdw * lz2mmzl ;
            if( lzType .indexOf('仰柱机构')>-1)return myzjg ;
        },
        m15:()=>{
            var djxz=model['djxz'];
            var datas=[];
            for(var key in djxz){
                var data=djxz[key];
               if((!lg||data["lg"]== lg )&&
                   (!ll||data["ll"]== ll )&&
                   (!hzzcxh||data["hzzcxh"]== hzzcxh )&&
                   (!trippingModel||data["yxjgxz"]== trippingModel ))
                   datas.push(data);
            }
            if(datas.length==1)
                return datas[0]['m15']
        },
        m16:()=>{
            if( trippingModel =='无')
                return 0
        },
        m17:()=>{
            if( trippingModel =='无')
                return 0
        },
        m18:()=>{
            if( trippingModel =='无')
                return 0
        },
        m19:()=>{
            if( trippingModel =='无')
                return 0
        },
        lslqg:function(){
            return lbd - ( lg / 2 ) ;
        },
        lshlqg:function(){
            return lbd - ( lg / 2 ) - ( ldcgh - lbtzh ) ;
        },
         lbj:function(){
            let dbjs=null;
            let temp= dbModel ;
            if(!temp)
                return ;
            else if(temp.indexOf('1+1伸缩臂')>-1){
                dbjs=1;
            }else if(temp.indexOf('2+1伸缩臂')>-1){
                dbjs=2;
            }else if(temp.indexOf('3+1伸缩臂')>-1){
                dbjs=3;
            }else if(temp.indexOf('4+1伸缩臂')>-1){
                dbjs=4;
            }else if(temp.indexOf('单臂')>-1){
                dbjs=0;
            }
            return lbx - ldcgh -0.1* dbjs ;
         },

        lbpx:function(){
            if( ydpzModel == "是" )
                return lbp-lxtz;
            else
                return lbp;
        },
        lqg1:function(){
            return lshlqg ;
        },
        lqg2:function(){
            return lbd - ( lg / 2 ) - ( ldcgh - ldslzh ) ;
        },
        lqg3:function(){
            return lshlqg ;
        },
        lqg6:function(){
            if( m6 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg7:function(){
            if( m7 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg8:function(){
            if( m8 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg9:function(){
            return lg / 2 ;
        },
        lqg10:function(){
            if( m10 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg11:function(){
             return lbp + lg / 2 ;
              },

        lqg12:function(){
            return lg / 2 ;
        },

        lqg14:function(){
            if( m14 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg15:function(){
            return lg / 2 ;
        },
        lqg16:function(){
            if( trippingModel == "无" )
                return 0;
            else
                return 0;
        },
        lqg17:function(){
            if( trippingModel == "无" ){
                return 0 ;
            }else if ( yxjgazModel =="对角安装" ){
                return lg ;
            }else if ( yxjgazModel =="同侧安装" ){
                return 0 ;
            }
        },
        lqg18:function(){
            if( trippingModel == "无" ){
                return 0 ;
            }else if ( yxjgazModel =="对角安装" ){
                return lg;
            }else if ( yxjgazModel =="同侧安装" ){
                return lg ;
            }
        },
        lqg19:function(){
            if( trippingModel == "无" ){
                return 0 ;
            }else if ( yxjgazModel =="对角安装" ){
                return 0 ;
            }else if ( yxjgazModel =="同侧安装" ){
                return lg ;
            }
        },
        lqg20:function(){
            if( m20 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
        lqg21:function(){
            if( m21 == 0 ){
                return 0 ;
            }else {
                return ' ' ;
            }
        },
    };

    getMultilevelTable("dbType","dbModel",["dbxzd", "dbxz1", "dbxz2", "dbxz3", "dbxz4"]);
    getMultilevelTable("lzType","lzModel",["lzxzgd", "lzxzds", "lzxzybgd", "yzjgxz"]);
    getTable("dcModel","dcxz");
    getTable("dhzjgModel","hzjgxz");
    getTable(null,"djxz");
    getTable("gruModel","gruxz");
    getTable("btModel","btxz");
    getTable("qsjgModel","qsjgxz");
    getTable("trippingModel","yxjgxz");
    getTable("dcgssModel","dcgssxz");
    data.init(calculateFunction);
    $('[name=gruModel],[name=tsl]').change(()=>{
        var se=$('[name=gruModel]').val();
        var ie=$('[name=tsl]').val();
        var temp;
        switch (se) {
            case 'GRU285':temp=600;break;
            case 'GRU295':temp=750;break;
            case 'GRU313':temp=1000;break;
        }
        if(ie>temp){
            data.datalist['tsl'].val='';
            $('[name=tsl]').attr('placeholder','超过GRU额定载荷').val('')
        }else{
            $('[name=tsl]').attr('placeholder','')
        }
    })

</script>
</body>
</html>